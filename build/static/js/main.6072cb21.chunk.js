(this["webpackJsonpchat-exam-app"]=this["webpackJsonpchat-exam-app"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(49),s=a.n(r),o=a(21),l=a(1),i=(a(61),a(8)),u=(a(62),function(){var e=c.a.useState(""),t=Object(i.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{className:"home-container"},c.a.createElement("input",{type:"text",placeholder:"Please typing username(user1, user2, user3, user4)",value:a,onChange:function(e){n(e.target.value)},className:"text-input-field"}),c.a.createElement(o.b,{to:"/user/".concat(a),className:"enter-room-button"},"enter"),JSON.stringify(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"http://localhost:4000"})))}),m=a(29),d=a.n(m),f=a(52),E=a(55),h=a(53),p=a.n(h),v=a(15),g=a.n(v),N=(a(99),"http://localhost:4000"),O=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){return fetch(N+"/user/"+e).then((function(e){return e.json()})).then((function(e){r(e)})),function(){}}),[e]),{user:c}},b=a(54),S=function(e){var t,a=e.match.params,r=a.username,s=a.chatId,o=O(r).user,l=Object(n.useState)([]),u=Object(i.a)(l,2),m=u[0],h=u[1],v=Object(n.useState)(""),S=Object(i.a)(v,2),j=S[0],w=S[1],_=Object(n.useRef)();Object(n.useEffect)((function(){return _.current=p()(N,{query:{chatId:s}}),_.current.on("CREATE_MESSAGE",(function(e){h((function(t){return[e].concat(Object(E.a)(t))}))})),function(){_.current.disconnect()}}),[s]);Object(n.useEffect)((function(){s&&function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(N,"/chat/").concat(s),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,h(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}()()}),[s]);return c.a.createElement("div",{className:"container clearfix"},c.a.createElement("div",{className:"people-list",id:"people-list"},c.a.createElement("ul",{className:"list"},null===o||void 0===o||null===(t=o.chatList)||void 0===t?void 0:t.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.Link,{className:"clearfix",key:"c_".concat(t),to:"/user/".concat(o.name,"/").concat(e.id)},c.a.createElement("img",{src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01.jpg",alt:"avatar"}),c.a.createElement("div",{className:"about"},c.a.createElement("div",{className:"name"},e.client.name),c.a.createElement("div",{className:"status"},c.a.createElement("i",{className:"fa fa-circle online"})," ",g()(e.updatedAt).fromNow()))))})))),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat-history"},c.a.createElement("ul",null,null===m||void 0===m?void 0:m.sort((function(e,t){return g()(e.createdAt).valueOf()-g()(t.createdAt).valueOf()})).map((function(e,t){return c.a.createElement("li",{key:e.id,className:"".concat(e.userId===o.id?"":"clearfix")},c.a.createElement("div",{className:"message-data ".concat(e.userId===o.id?"":"align-right")},c.a.createElement("span",{className:"message-data-time"},g()(e.createdAt).fromNow()),"\xa0 \xa0",c.a.createElement("span",{className:"message-data-name"})," ",c.a.createElement("i",{className:"fa fa-circle me"})),c.a.createElement("div",{className:"message  ".concat(e.userId===o.id?"my-message":"other-message float-right")},e.content))})))),c.a.createElement("div",{className:"chat-message clearfix"},c.a.createElement("textarea",{value:j,onChange:function(e){w(e.target.value)},name:"message-to-send",id:"message-to-send",placeholder:"Type your message",rows:"3"}),c.a.createElement("i",{className:"fa fa-file-o"})," \xa0\xa0\xa0",c.a.createElement("i",{className:"fa fa-file-image-o"}),c.a.createElement("button",{onClick:function(){var e;e=j,_.current.emit("SEND_MESSAGE",{chatId:s,userId:o.id,content:e}),w("")},className:"send-message-button"},"Send"))))};var j=function(){return c.a.createElement(o.a,null,c.a.createElement(l.Switch,null,c.a.createElement(l.Route,{exact:!0,path:"/",component:u}),c.a.createElement(l.Route,{path:"/user/:username/:chatId",component:S}),c.a.createElement(l.Route,{path:"/user/:username",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t,a){e.exports=a(100)},61:function(e,t,a){},62:function(e,t,a){},99:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.6072cb21.chunk.js.map